<div id='background-container'></div>

<script type="text/javascript">
	const backgroundHtml = `
<div class="background-image">
</div>

<style type="text/css">
	body {
		overflow: hidden;
	}

	.band {
		background-color: rgba(255, 255, 255, 0.8);
		border-radius: 8px;
	}

	.background-image {
		background: url('/img?path=<%= fact.image %>');
		position: absolute;
		z-index: -1;
		top:0;
		left: 0;
		width: 100%;
		height: 100%;
		background-size: cover;
		background-position: center;
		-webkit-filter: blur(2px);
		-moz-filter: blur(2px);
		-o-filter: blur(2px);
		-ms-filter: blur(2px);
		filter: blur(2px);
		opacity: 0;
		overflow: hidden;
	}
</style>`;

let backgroundSet = false;

setBackground = () => {
	if(backgroundSet) return;
	backgroundSet = true;
	
	<% if(fact.image) { %>
	$('#background-container').html(backgroundHtml);
	console.log('animate');
	$('body').animate({
		backgroundColor: '#000000'
	}, 250);
	$('.background-image').animate({
		opacity: 0.8
	}, 250, () => { console.log('animate done'); });
	<% } %>
}
</script>